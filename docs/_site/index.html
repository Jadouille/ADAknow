<!DOCTYPE html>
<html>
  <head>
    <title>ADAknow – We are where we eat</title>
    <!-- Begin Jekyll SEO tag v2.5.0 -->
<title>ADAknow | We are where we eat</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="ADAknow" />
<meta name="author" content="Alfonso Amayuelas, Beatriz Borges, Jade Cock, Mahmoud Said" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="We are where we eat" />
<meta property="og:description" content="We are where we eat" />
<link rel="canonical" href="http://localhost:4000/ADAknow/" />
<meta property="og:url" content="http://localhost:4000/ADAknow/" />
<meta property="og:site_name" content="ADAknow" />
<script type="application/ld+json">
{"name":"ADAknow","description":"We are where we eat","author":{"@type":"Person","name":"Alfonso Amayuelas, Beatriz Borges, Jade Cock, Mahmoud Said"},"@type":"WebSite","url":"http://localhost:4000/ADAknow/","headline":"ADAknow","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

        <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    
    <meta name="description" content="We are where we eat">
    <meta property="og:description" content="We are where we eat" />
    
    <meta name="author" content="ADAknow" />

    

    
    <meta property="og:image" content="http://localhost:4000/images/adaknow.png"/>
    <meta property="twitter:image" content="http://localhost:4000/images/adaknow.png"/>
    
    <meta property="og:site_name" content="Amit Merchant - Software Engineer"/>


    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="/ADAknow/assets/vendor/fontawesome.min.css" />
    <link rel="stylesheet" type="text/css" href="/ADAknow/assets/style.css" />
    <link rel="stylesheet" type="text/css" href="/ADAknow/assets/custom.css" />
    <link rel="alternate" type="application/rss+xml" title="ADAknow - We are where we eat" href="/ADAknow/feed.xml" />
    <link rel="canonical" href="http://localhost:4000/" />

    <meta name="theme-color" content="#000000">
    <link rel="icon" type="image/png" sizes="32x32" href="/ADAknow/images/favicon-32x32.png">
  </head>

  <body>
    <div id="bar"></div>
    <div class="wrapper-container">
      <div class="wrapper-masthead">
        <div class="container">
          <header class="masthead clearfix">
            <a href="/ADAknow/" class="site-avatar"><img src="/ADAknow/images/adaknow.png" /></a>

            <div class="site-info">
              <h1 class="site-name"><a href="/ADAknow/">ADAknow</a></h1>
              <p class="site-description">We are where we eat</p> 
            </div>

            <nav>
              <a href="/ADAknow/"><strong>Data Story</strong></a>
              <span style="margin: 0 4px; font-weight: lighter;">|</span>
              <a href="https://github.com/obiwit/ADAknow" style="margin: 0;">Analysis Source Code</a>
            </nav>
          </header>
        </div>
      </div>

      <div class="wrapper-main">
        <div id="main" role="main" class="container">
          <div class="sticky-container">
  What is the impact of
  <ul class="sticky">
      
      <li>
        <a href="#head_Type">the business type?</a>
      </li>
    
      <li>
        <a href="#head_Neighborhood">the neighborhood?</a>
      </li>
    
      <li>
        <a href="#head_Size">the business size?</a>
      </li>
    
      <li>
        <a href="#head_Time">the time of the year?</a>
      </li>
    
      <li>
        <a href="#head_Reviews">the business reviews?</a>
      </li>
    
  </ul>
</div>

<div class="posts">

  <!-- intro -->
    <div class="post">
      <!-- <img src="/ADAknow/images/chicago.jpg" style="position: absolute; opacity: 0.2; left: 0; z-index: -1; top: 110px; height: 600px;"/> -->

<h1 id="we-are-where-we-eat">We are where we eat</h1>
<p>We are shaped by what we eat. But we are also shaped by where we eat. Are chefs ready to trade high-quality, fresh ingredients for cheaper stale ones? Are there places and times where food conservation has a subjective meaning? Are large-scale franchises such as McDonald’s and Starbucks under the same level of scrutiny as normal restaurants despite the economic interests at play?</p>

<blockquote>
  <p>We will do a deep dive into Chicago’s food inspection scene and everything happening behind the curtain.</p>
</blockquote>

<p style="position: relative">To achieve this, we will pore over <span class="it_tooltip" data-tip="Chicago's Food Inspection Dataset is generated from inspections of restaurants and other food establishments in Chicago from January 1, 2010, to the present. Inspections are performed by staff from the Chicago Department of Public Health’s Food Protection Program using a standardized procedure. The results of the inspection are inputted into a database, then reviewed and approved by a State of Illinois Licensed Environmental Health Practitioner (LEHP).">Chicago's Food Inspections dataset</span>, and answer five big questions: 
</p>

    </div>

    <!-- for loop with every impact question -->
    
      <h2>
        <a style="color: inherit; font-weight: lighter;" data-toggle="collapse" href="#Type" 
           aria-expanded="true" aria-controls="Type" id="head_Type">
           What is the impact of <span class="emphasis">the business type</span>?
           <i class="fa fa-caret-down" aria-hidden="false" style="margin-left: 10%;"></i>
        </a>
      </h2>
      <div id="Type" class="collapse show"><p>The district of Chicago is full of different restaurants and catering businesses. These range from restaurants to bars to grocery stores to school cafeterias to hospitals to many others. However, these are not present at the same frequency. </p>

<p style="position: relative;">At a first look, it's impossible to be certain on whether the difference in facilities inspections reflects some bias or simply the food business landscape in Chicago. The donut chart bellow reflects the number of inspections per <span class="bt_tooltip" data-tip="The original dataset had more than 440 different facility types. This number was reduced to 43 through a autonomous grouping method - which would group non-representative categories into either the closest representative one, or instead into a (newly created) miscellaneous category.">business type</span>, for the 9 most common types (and a tenth type, <span style="font-family: monospace;font-size: 0.9em; color: white; background: #765145; border-radius: 10%; padding: 0.5% 0.75%;">other types</span> representing the remaining 34 categories).</p>

<div id="visits_chart"></div>

<p> To ascertain whether these inspections favor a particular type of business, we can examine the ratios of their inspection results. An inspection results in one of seven possible outcomes: <span style="font-family: monospace;font-size: 0.9em; color: white; background: #B8BD79; border-radius: 10%; padding: 0.5% 0.75%;">Pass</span>, <span style="font-family: monospace;font-size: 0.9em; color: #404040; background: #FED18E; border-radius: 10%; padding: 0.5% 0.75%;">Pass with conditions</span>, <span style="font-family: monospace;font-size: 0.9em; color: white; background: #FF8C57; border-radius: 10%; padding: 0.5% 0.75%;">Fail</span>, <span style="font-family: monospace;font-size: 0.9em; color: white; background: #EF4F43; border-radius: 10%; padding: 0.5% 0.75%;">Not ready</span>, <span style="font-family: monospace;font-size: 0.9em; color: white; background: #373A29; border-radius: 10%; padding: 0.5% 0.75%;">No entry</span>, <span style="font-family: monospace;font-size: 0.9em; color: white; background: #991163; border-radius: 10%; padding: 0.5% 0.75%;">Out of business</span>, <span style="font-family: monospace;font-size: 0.9em; color: white; background: #69919F; border-radius: 10%; padding: 0.5% 0.75%;">Business not located</span>. You can explore these ratios yourself in the plot below.</p>

<p style="position: relative;">The plot has 3 bars, the top one with the global average accross all entries in the data, the second the average across one <span class="ct_tooltip" data-tip="From the 43 food-related business types, we create 9 non-mutually-exclusive categories, based on their area of business.">category</span>, and the third one the average results for any one of the 43 specific business types.</p>

<ul class="breadcrumb" id="chartoptions">
  <li><strong>Chart options - </strong>All<span class="divider" style="margin: 0 5px 0 10px">/</span></li>
  <li id="catgs">
    <a class="dropdown-toggle" role="button" data-toggle="dropdown" href="#">All categories<b class="caret"></b></a>
    <ul id="catgs-dropdown" class="dropdown-menu"></ul>
    <span class="divider" style="margin: 0 5px 0 5px">/</span>
  </li>
  <li id="types">
    <a class="dropdown-toggle" role="button" data-toggle="dropdown" href="#">All types<b class="caret"></b></a>
    <ul id="types-dropdown" class="dropdown-menu"></ul>
  </li>
</ul>
<div id="pf_chart"></div>

<p>As we can observe, the probability of passing of failing an inspection is affected by the business type. However, this may simply reflect underlying factors. A mobile food vendor, for example, is likely to have fewer financial resources than a daycare or school owner (the main entities in the infant care category). As such, the later will definitely be able to invest more into ensuring proper kitchen and serving conditions.</p>

<p>Finally, overall, it appears that the inspections do indeed reflect the food business landscape in Chicago, as there aren't strong correlations with top or bottom facilities (passing- or failing-wise) and facilities with the least or most visits. As such, the results and inspections frequencies seem to be well balanced!</p>

<!-- JS -->
<script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>

<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

<script>
    visits = {
        'bakery': 2905,
        'children\'s services facility': 3152,
        'daycare (2 - 6 years)': 2688,
        'daycare above and under 2 years': 2356,
        'grocery store': 25014,
        'long term care': 1366,
        'not available': 4778,
        'restaurant': 130140,
        'school': 12081,
        'other types': 10347
        }
    vals = []
    names = []
    for (v in visits) {
        names.push(v)
        vals.push(visits[v])
    }
    var options = {
        chart: {
            type: 'donut',
            height: 450,
        },
        series: vals,
        labels: names,
        legend: {
            position: 'bottom',
            horizontalAlign: 'left', 
        },
        tooltip: {
                y: {
                    formatter: function(val) {
                    return val + " total visits"
                }
            }
        },
        colors: ['#3A0725', '#AF0F30', '#E45901', '#F7BA00', '#727D09', '#E3497E', '#E39E48', '#23D38A', '#DA56FB', '#775146']
    }
    var chart = new ApexCharts(
        document.querySelector("#visits_chart"),
        options
    );
    chart.render();
</script>

<script>
    function generate_plot(top, middle, bottom) {
        var options = {
            chart: {
                height: 350,
                type: 'bar',
                stacked: true,
                stackType: '100%'
            },
            plotOptions: {
                bar: {
                    horizontal: true,
                },
            },
            stroke: {
                width: 1,
                colors: ['#fff']
            },
            series: [{
                name: 'Pass',
                data: [top['data'][5], middle['data'][5], bottom['data'][5]]
            },{
                name: 'Pass with conditions',
                data: [top['data'][6], middle['data'][6], bottom['data'][6]]
            },{
                name: 'Fail',
                data: [top['data'][1], middle['data'][1], bottom['data'][1]]
            },{
                name: 'Not ready',
                data: [top['data'][3], middle['data'][3], bottom['data'][3]]
            },{
                name: 'No entry',
                data: [top['data'][2], middle['data'][2], bottom['data'][2]]
            },{
                name: 'Out of business',
                data: [top['data'][4], middle['data'][4], bottom['data'][4]]
            },{
                name: 'Business not located',
                data: [top['data'][0], middle['data'][0], bottom['data'][0]]
            }],
            title: {
                text: 'Average inspection results per category and type of business'
            },
            xaxis: {
                categories: [top['name'] + ' businesses', 
                             middle['name'] + (middle['name'] == 'All categories' ? '' : ' category'), 
                             bottom['name'] + (bottom['name'] == 'All types' ? '' : '-type businesses')],
            },
            tooltip: {
                    y: {
                        formatter: function(val) {
                        return val + "%"
                    }
                }
            },
            fill: {
                opacity: 1   
            },
            legend: {
                position: 'top',
                horizontalAlign: 'left',
                offsetX: 40
            },
            colors: ['#B8BD79', '#FED18E', '#FF8C57', '#EF4F43', '#373A29', '#991163', '#69919F']
        }
        $('div#pf_chart').html('')
        var chart = new ApexCharts(
            document.querySelector("#pf_chart"),
            options
        );
        chart.render();
    }
    function get_catg_pf_ratios(catg_name, facility_types) {
        // search existing
        for (i in facility_types) {
            if (catg_name == facility_types[i]['title']) {
                return pf_ratios['per_category'][catg_name];
            }
        } 
        // otherwise, 'all catgs' selected
        return pf_ratios['all']['all']
    }
    function get_catg_type_pf_ratios(type_name, catg_name, facility_types) {
        catg_array = get_catg_pf_ratios(catg_name, facility_types)
        // search existing
        for (i in all_types) {
            if (type_name == all_types[i]) {
                return [catg_array, pf_ratios['per_type'][type_name]];
            }
        } 
        // otherwise, 'all types' selected
        return [catg_array, catg_array]
    }
    var facility_types = [
        {
            'title': 'All categories',
            'lst': ['bakery', 'banquet', 'banquet hall', 'cafeteria', 'catering',
                'charter school', "children's services facility", 'coffee shop',
                'convenience', 'convenience store', 'daycare',
                'daycare (2 - 6 years)', 'daycare (2 years)',
                'daycare (under 2 years)', 'daycare above and under 2 years',
                'daycare combo 1586', 'gas station', 'golden diner',
                'grocery store', 'grocery/restaurant', 'hospital', 'kiosk',
                'liquor', 'live poultry', 'long term care', 'misc',
                'mobile food dispenser', 'mobile food preparer',
                'mobile frozen desserts vendor', 'mobile prepared food vendor',
                'navy pier kiosk', 'not available', 'private school', 'restaurant',
                'school', 'shared kitchen', 'shared kitchen user (long term)',
                'shared kitchen user (short term)', 'shelter', 'special event',
                'stadium', 'tavern', 'wholesale']
        },
        {
            'title': 'infant_care',
            'lst': ['school', 'children\'s services facility', 'daycare (2 - 6 years)',
                'daycare above and under 2 years', 'daycare combo 1586', 'charter school', 'daycare (under 2 years)', 'private school', 'daycare', 'daycare (2 years)']
        },
        {
            'title': 'catering',
            'lst': ['restaurant', 'bakery', 'catering', 'golden diner', 'tavern', 'banquet hall', 'grocery/restaurant', 'coffee shop', 'banquet', 'cafeteria']
        },
        {
            'title': 'alcohol',
            'lst': ['tavern', 'liquor']
        },
        {
            'title': 'stores',
            'lst': ['grocery store', 'bakery', 'wholesale', 'gas station', 'grocery/restaurant', 'kiosk', 'live poultry', 'convenience store', 'navy pier kiosk', 'convenience']
        },
        {
            'title': 'special_events',
            'lst': ['catering', 'misc', 'special event',  'banquet hall', 'shared kitchen user (long term)', 'charter school', 'banquet', 'stadium']
        },
        {
            'title': 'adult_care',
            'lst': ['long term care', 'daycare combo 1586', 'hospital', 'shelter']
        },
        {
            'title': 'mobile_vendors',
            'lst': ['mobile food dispenser', 'mobile food preparer', 'mobile prepared food vendor', 'mobile frozen desserts vendor']
        },
        {
            'title': 'shared_facilities',
            'lst': ['shared kitchen user (long term)', 'shared kitchen', 'shared kitchen user (short term)']
        },
        {
            'title': 'uncommon_facilities',
            'lst': ['not available', 'misc', 'shelter', 'shared kitchen', 'live poultry', 'navy pier kiosk', 'stadium', 'shared kitchen user (long term)', 'shared kitchen user (short term)']
        }
    ]
    all_types = ['bakery', 'banquet', 'banquet hall', 'cafeteria', 'catering',
        'charter school', "children's services facility", 'coffee shop',
        'convenience', 'convenience store', 'daycare',
        'daycare (2 - 6 years)', 'daycare (2 years)',
        'daycare (under 2 years)', 'daycare above and under 2 years',
        'daycare combo 1586', 'gas station', 'golden diner',
        'grocery store', 'grocery/restaurant', 'hospital', 'kiosk',
        'liquor', 'live poultry', 'long term care', 'misc',
        'mobile food dispenser', 'mobile food preparer',
        'mobile frozen desserts vendor', 'mobile prepared food vendor',
        'navy pier kiosk', 'not available', 'private school', 'restaurant',
        'school', 'shared kitchen', 'shared kitchen user (long term)',
        'shared kitchen user (short term)', 'shelter', 'special event',
        'stadium', 'tavern', 'wholesale']
    var pf_ratios = {
        'per_type': {
            'shared kitchen user (short term)': [0.0, 0.0, 0.0, 0.0, 0.0, 97.3, 2.7],
            'shared kitchen user (long term)': [0.0, 2.8, 0.6, 0.0, 0.0, 91.7, 5.0],
            'navy pier kiosk': [0.0, 13.6, 0.0, 1.5, 4.5, 75.8, 4.5],
            'daycare (2 years)': [0.0, 15.1, 1.9, 0.0, 7.5, 71.7, 3.8],
            'kiosk': [0.0, 21.5, 0.0, 0.9, 0.0, 71.0, 6.5],
            'school': [0.0, 19.6, 0.3, 0.0, 2.7, 69.1, 8.2],
            'shelter': [0.0, 20.5, 1.9, 0.0, 2.5, 67.7, 7.5],
            'hospital': [0.2, 14.5, 0.2, 0.5, 4.2, 65.7, 14.7],
            'private school': [0.0, 15.7, 0.0, 1.9, 8.3, 64.8, 9.3],
            'daycare above and under 2 years': [0.1, 17.7, 1.5, 0.2, 4.5, 64.6, 11.5],
            'daycare (under 2 years)': [0.0, 21.3, 1.2, 0.0, 8.8, 63.9, 4.8],
            'cafeteria': [0.0, 11.9, 0.0, 0.0, 8.3, 63.1, 16.7],
            'special event': [0.0, 16.2, 2.3, 2.3, 5.6, 63.0, 10.6],
            'golden diner': [0.0, 19.5, 1.4, 0.2, 4.8, 62.3, 11.9],
            "children's services facility": [0.0, 17.7, 1.8, 0.6, 3.1, 61.8, 15.1],
            'daycare (2 - 6 years)': [0.0, 19.3, 2.5, 0.4, 8.8, 61.6, 7.3],
            'convenience': [0.0, 20.0, 1.5, 0.0, 13.8, 60.0, 4.6],
            'shared kitchen': [0.0, 20.8, 4.9, 2.8, 4.2, 59.7, 7.6],
            'daycare': [0.0, 14.6, 0.0, 0.0, 12.2, 58.5, 14.6],
            'mobile food dispenser': [0.1, 29.8, 1.1, 1.2, 5.2, 58.1, 4.5],
            'wholesale': [0.0, 33.8, 0.9, 0.2, 5.9, 57.2, 2.0],
            'daycare combo 1586': [0.0, 22.3, 1.7, 0.0, 11.7, 56.2, 8.2],
            'banquet': [0.0, 16.3, 13.0, 0.8, 2.4, 56.1, 11.4],
            'long term care': [0.0, 22.1, 0.3, 0.6, 4.0, 56.0, 17.1],
            'coffee shop': [0.8, 19.4, 0.0, 1.6, 9.3, 55.8, 13.2],
            'convenience store': [0.0, 22.9, 0.0, 3.6, 8.4, 55.4, 9.6],
            'charter school': [0.0, 17.9, 6.0, 3.6, 8.3, 54.8, 9.5],
            'bakery': [0.0, 21.4, 3.0, 1.2, 8.1, 54.7, 11.6],
            'restaurant': [0.0, 18.7, 3.9, 0.9, 6.9, 54.0, 15.6],
            'catering': [0.0, 16.0, 7.5, 0.7, 8.8, 53.8, 13.2],
            'mobile prepared food vendor': [0.0, 21.0, 0.8, 19.4, 0.0, 53.2, 5.6],
            'grocery store': [0.0, 23.7, 1.6, 1.1, 8.9, 53.0, 11.7],
            'grocery/restaurant': [0.0, 18.1, 1.4, 0.7, 8.3, 52.1, 19.4],
            'misc': [0.0, 20.1, 3.0, 3.3, 8.1, 51.3, 14.2],
            'live poultry': [0.0, 28.7, 0.0, 0.0, 5.7, 50.6, 14.9],
            'liquor': [0.0, 35.4, 2.9, 2.9, 4.9, 49.4, 4.5],
            'mobile food preparer': [0.2, 28.8, 1.5, 7.4, 2.9, 48.9, 10.3],
            'gas station': [0.0, 27.7, 0.5, 2.3, 10.8, 47.4, 11.3],
            'tavern': [0.0, 32.3, 8.0, 2.4, 4.5, 45.4, 7.4],
            'mobile frozen desserts vendor': [0.0, 8.5, 2.8, 10.4, 1.9, 40.6, 35.8],
            'banquet hall': [0.0, 23.0, 20.9, 0.5, 7.0, 39.0, 9.6],
            'stadium': [0.0, 26.7, 2.2, 2.2, 0.0, 37.8, 31.1],
            'not available': [0.5, 7.7, 1.5, 2.0, 82.0, 5.4, 0.8]
        },
        'all': {
            'all': [0.044186, 19.641860, 2.476744, 1.867442, 7.623256, 57.662791, 10.683721]
        },
        'per_category': {
            'adult_care': [0.0, 0.2055084745762712, 0.007062146892655367, 0.0035310734463276836, 0.059322033898305086, 0.5858050847457628, 0.13665254237288135],
            'alcohol': [0, 0.3273657289002558, 0.01619778346121057, 0.0, 0.021312872975277068, 0.4680306905370844, 0.026427962489343565],
            'catering': [0.0, 0.18709406618654179, 0.039507209237249444, 0.009072298561098101, 0.06871971604883724, 0.5401773221991487, 0.15436898923400932],
            'infant_care': [0.0, 0.19091537929444316, 0.010145261701637076, 0.0017984782107447544, 0.04168780262854508, 0.659534240258243, 0.09398201521789255],
            'mobile_vendors': [0.0, 0.273224043715847, 0.012143290831815421, 0.052823315118397086, 0.03642987249544627, 0.5324833029751063, 0.08561020036429873],
            'shared_facilities': [0, 0.08659217877094973, 0.0111731843575419, 0.0, 0.00558659217877095, 0.7932960893854749, 0.04748603351955307],
            'special_events': [0, 0.1582891039650328, 0.04308460817983141, 0.0, 0.05650952232282235, 0.5388698095535436, 0.111145800811739],
            'stores': [0.0, 0.23631261976457707, 0.016630166986038874, 0.010881467287161238, 0.08674377224199288, 0.5329865863673693, 0.11500821242814126],
            'uncommon_facilities': [0.0, 0.1038135593220339, 0.013922518159806295, 0.017100484261501212, 0.6060835351089588, 0.20021186440677965, 0.036168280871670705]
        }
    }
    for (i in facility_types) {
        $('#chartoptions li#catgs ul').append(
            `<li class="dropdown-item"><a tabindex="-1" href="#">`+facility_types[i]['title']+`</a></li>`);
    }
    $('#chartoptions li#types ul').append(
        `<li class="dropdown-item"><a tabindex="-1" href="#">All types</a></li>`);
    for (i in all_types) {
        $('#chartoptions li#types ul').append(
            `<li class="dropdown-item"><a tabindex="-1" href="#">`+all_types[i]+`</a></li>`);
    }
    $('#types-dropdown li a').click(function(e) {
        // update breadcrumbs
        console.log('a')
        e.preventDefault();
        var $li_parent = $(e.target).parent().parent().parent()
        var $a_child = $li_parent.children('a.dropdown-toggle')
        type_name = $(e.target).text()
        $a_child.text(type_name)
        // update plot
        catg_name = $('li#catgs a.dropdown-toggle').text()
        ct_pf_ratios = get_catg_type_pf_ratios(type_name, catg_name, facility_types)
        generate_plot({'name': 'All', 'data': pf_ratios['all']['all']}, 
                        {'name': catg_name, 'data': ct_pf_ratios[0]},
                        {'name': type_name, 'data': ct_pf_ratios[1]})
    });
    $('#catgs-dropdown li a').click(function(e) {
        // update breadcrumbs
        e.preventDefault();
        var $li_parent = $(e.target).parent().parent().parent()
        var $a_child = $li_parent.children('a.dropdown-toggle')
        catg_name = $(e.target).text()
        $a_child.text(catg_name)
        // update types 
        for (i in facility_types) {
            if (catg_name == facility_types[i]['title']) {
                $('#chartoptions li#types ul').html(`<li class="dropdown-item"><a tabindex="-1" href="#">All types</a></li>`);
                for (j in facility_types[i]['lst']) {
                    $('#chartoptions li#types ul').append(
                        `<li class="dropdown-item"><a tabindex="-1" href="#">` +
                        facility_types[i]['lst'][j] + `</a></li>`);
                }
                // update types dropdown and re-add event listeners
                $('li#types a.dropdown-toggle').text('All types')
                $('#types-dropdown li a').click(function(e) {
                    e.preventDefault();
                    var $li_parent = $(e.target).parent().parent().parent();
                    var $a_child = $li_parent.children('a.dropdown-toggle');
                    type_name = $(e.target).text(); $a_child.text(type_name);
                    catg_name = $('li#catgs a.dropdown-toggle').text();
                    ct_pf_ratios = get_catg_type_pf_ratios(type_name, catg_name, facility_types);
                    generate_plot({'name': 'All', 'data': pf_ratios['all']['all']}, {'name': catg_name, 'data': ct_pf_ratios[0]}, {'name': type_name, 'data': ct_pf_ratios[1]});
                });
                break;
            }
        } 
        // update plot
        catg_array = get_catg_pf_ratios(catg_name, facility_types)
        generate_plot({'name': 'All', 'data': pf_ratios['all']['all']}, 
                        {'name': catg_name, 'data': catg_array},
                        {'name': 'All types', 'data':  catg_array})
    });
    generate_plot({'name': 'All', 'data': pf_ratios['all']['all']}, 
                  {'name': 'All categories', 'data': pf_ratios['all']['all']},
                  {'name': 'All types', 'data': pf_ratios['all']['all']})
</script>

</div>
      <hr>
    
      <h2>
        <a style="color: inherit; font-weight: lighter;" data-toggle="collapse" href="#Neighborhood" 
           aria-expanded="true" aria-controls="Neighborhood" id="head_Neighborhood">
           What is the impact of <span class="emphasis">the neighborhood</span>?
           <i class="fa fa-caret-down" aria-hidden="false" style="margin-left: 10%;"></i>
        </a>
      </h2>
      <div id="Neighborhood" class="collapse show"><p>Apart from the type of service provided, other permanent factors affect a business, but maybe none more than its location. In the data, the business have one of 68 distinct possible zip codes. To simplify for a first analysis, we grouped them into 7 zones, based on <a href="https://www.seechicagorealestate.com/chicago-zip-codes-by-neighborhood.php">Chigaco's Fultron Grace real estate data</a>. However, with this splitting method there are no observable differences in the probability of a facility's likelihood to pass or fail an inspection. As such, we will take a deeper look, using a geographical split based on prevalent ethnicities to assess whether this still remains the case.</p>

<hr style="opacity: 0.2;" />

<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Fusce bibendum neque eget nunc mattis eu sollicitudin enim tincidunt. Vestibulum lacus tortor, ultricies id dignissim ac, bibendum in velit. Praesent varius interdum vehicula. Aenean risus libero, placerat at vestibulum eget, ultricies eu enim. Praesent nulla tortor, malesuada adipiscing adipiscing sollicitudin, adipiscing eget est.</p>

<p>Proin convallis mi ac felis pharetra aliquam. Curabitur dignissim accumsan rutrum. In arcu magna, aliquet vel pretium et, molestie et arcu.</p>

<div class="dropdown" style="padding-left: 10%;">
  <button class="btn btn-light dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" style="background: #dedede;">Change plot type  
  </button>
  <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
    <a class="dropdown-item" href="#" data-id="42d07252-f4ac-4b45-aa19-fc69c53fef94">All</a>
    <a class="dropdown-item" href="#" data-id="1e38adb2-a7f7-4858-b207-fe98c1292e28">Black and African American Population</a>
    <a class="dropdown-item" href="#" data-id="e2253a01-4bfc-40ef-b0da-db6e7e41fad0">Hispanic or Latino Population</a>
    <a class="dropdown-item" href="#" data-id="55807f9e-8d15-45ec-9772-a19c0f25eddc">White Population</a>
  </div>
</div>
<script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>

<script type="text/javascript" src="/ADAknow/assets/plotly.js"></script>

<div id="42d07252-f4ac-4b45-aa19-fc69c53fef94" class="plotly-graph-div" style="height:500px; width:100%;"></div>
<div id="1e38adb2-a7f7-4858-b207-fe98c1292e28" class="plotly-graph-div" style="display: none;"></div>
<div id="e2253a01-4bfc-40ef-b0da-db6e7e41fad0" class="plotly-graph-div" style="display: none;"></div>
<div id="55807f9e-8d15-45ec-9772-a19c0f25eddc" class="plotly-graph-div" style="display: none;"></div>

<p>Mauris lobortis nulla et felis ullamcorper bibendum. Phasellus et hendrerit mauris. Proin eget nibh a massa vestibulum pretium. Suspendisse eu nisl a ante aliquet bibendum quis a nunc. Praesent varius interdum vehicula. Aenean risus libero, placerat at vestibulum eget, ultricies eu enim. Praesent nulla tortor, malesuada adipiscing adipiscing sollicitudin, adipiscing eget est.</p>

<iframe src="/ADAknow/map" style="width: 100%; height: 400px;"></iframe>

<!-- JS -->
<script>
    $('div.dropdown div a').click(function(e) {
        e.preventDefault();
        $('div.plotly-graph-div').hide()
        console.log($(e.target))
        map_id = $(e.target).attr("data-id")
        $('#'+map_id).show()
    });
</script>

<script type="text/javascript">
    window.PLOTLYENV=window.PLOTLYENV || {};
    if (document.getElementById("42d07252-f4ac-4b45-aa19-fc69c53fef94")) {
        Plotly.newPlot(
            '42d07252-f4ac-4b45-aa19-fc69c53fef94',
            [{"hovertext": ["all food establishments that prepare, sell, or store hot food shall have adequate hot food storage f ...", "All hot food shall be stored at a temperature of 140\u00b0F or higher, all cold food shall be stored at a ...", "No person affected with or carrying any disease in a communicable form or afflicted with boils, infe ...", "In food establishments, there shall be adequate sewage and waste water disposal facilities that comp ...", "Adequate and convenient toilet facilities shall be provided.\u00a0 They should be properly designed, main ...", "All food should be properly protected from contamination during storage, preparation, display, servi ...", "All necessary control measures shall be used to effectively minimize or eliminate the presence of ro ...", "The area outside of the establishment used for the storage of garbage shall be clean at all times an ...", "A certified food service manager must be present in all establishments at which potentially hazardou ...", "All dishwashing machines must be of a type that complies with all requirements of the plumbing secti ...", "A separate and distinct offense shall be deemed to have been committed for each Minor violation that ...", "All food not stored in the original container shall be stored in properly labeled containers, the li ...", "Containers and utensils shall be inverted, covered, or otherwise protected from contamination until  ...", "All food and non-food contact equipment and utensils shall be smooth, easily cleanable, and durable, ...", "All utensils shall be thoroughly cleaned and sanitized after each usage, all food and non-food conta ...", "The floors shall be constructed per code, be smooth and easily cleaned, and be kept clean and in goo ...", "The walls and ceilings shall be in good repair and easily cleaned, use dustless cleaning methods. ...", "All rooms in which food or drink is prepared, or in which utensils are washed, shall be lighted so t ...", "Toilet rooms shall be completely enclosed and shall be vented to the outside air or mechanically ven ...", "The flow of air discharged from kitchen fans shall always be through a duct to a point above the roo ...", "All food establishments that display, prepare, or store potentially hazardous foods shall have calib ...", "All parts of the food establishment and all parts of the property used in connection with the operat ...", null], "marker": {"color": "lightskyblue", "line": {"width": 1.5}}, "name": "White Alone", "opacity": 0.8, "type": "bar", "x": [2, 3, 5, 10, 11, 16, 18, 19, 21, 24, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 40, 41, 55], "y": [0.021645277662783135, 0.03728783488083269, 0.01518914976245392, 0.015908687681116564, 0.015504563644607408, 0.03178780531078124, 0.08460977388767323, 0.019664084215506535, 0.020225915193092435, 0.01688449937902892, 0.03650915685926627, 0.026504622784710313, 0.016914069430480808, 0.08786247954738108, 0.09092790821456029, 0.10348532339779605, 0.09428903739625841, 0.0443156504425651, 0.017259053364086188, 0.0962800875273523, 0.026277919056912492, 0.052762828473988214, 0.02786484515149723]}, {"hovertext": ["all food establishments that prepare, sell, or store hot food shall have adequate hot food storage f ...", "All hot food shall be stored at a temperature of 140\u00b0F or higher, all cold food shall be stored at a ...", "No person affected with or carrying any disease in a communicable form or afflicted with boils, infe ...", "In food establishments, there shall be adequate sewage and waste water disposal facilities that comp ...", "Adequate and convenient toilet facilities shall be provided.\u00a0 They should be properly designed, main ...", "All food should be properly protected from contamination during storage, preparation, display, servi ...", "All necessary control measures shall be used to effectively minimize or eliminate the presence of ro ...", "The area outside of the establishment used for the storage of garbage shall be clean at all times an ...", "A certified food service manager must be present in all establishments at which potentially hazardou ...", "All dishwashing machines must be of a type that complies with all requirements of the plumbing secti ...", "A separate and distinct offense shall be deemed to have been committed for each Minor violation that ...", "All food not stored in the original container shall be stored in properly labeled containers, the li ...", "Containers and utensils shall be inverted, covered, or otherwise protected from contamination until  ...", "All food and non-food contact equipment and utensils shall be smooth, easily cleanable, and durable, ...", "All utensils shall be thoroughly cleaned and sanitized after each usage, all food and non-food conta ...", "The floors shall be constructed per code, be smooth and easily cleaned, and be kept clean and in goo ...", "The walls and ceilings shall be in good repair and easily cleaned, use dustless cleaning methods. ...", "All rooms in which food or drink is prepared, or in which utensils are washed, shall be lighted so t ...", "Toilet rooms shall be completely enclosed and shall be vented to the outside air or mechanically ven ...", "The flow of air discharged from kitchen fans shall always be through a duct to a point above the roo ...", "All food establishments that display, prepare, or store potentially hazardous foods shall have calib ...", "All parts of the food establishment and all parts of the property used in connection with the operat ...", null], "marker": {"color": "dodgerblue", "line": {"width": 1.5}}, "name": "Black or African American Alone", "opacity": 0.8, "type": "bar", "x": [2, 3, 5, 10, 11, 16, 18, 19, 21, 24, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 40, 41, 55], "y": [0.023245223655068203, 0.027778352756101094, 0.01333029744778622, 0.01564861004740121, 0.01581420380451657, 0.010370309039349216, 0.09848688704435843, 0.023576411169298917, 0.02912380203266337, 0.01422036389228126, 0.020802715737616693, 0.015006934238579206, 0.009914926207281986, 0.07039804599366604, 0.0949680197056571, 0.11183788371178406, 0.11020264536026991, 0.050174908405953095, 0.020637121980501334, 0.10072240276541575, 0.02446647761379396, 0.0763801204694583, 0.022872637701558653]}, {"hovertext": ["all food establishments that prepare, sell, or store hot food shall have adequate hot food storage f ...", "All hot food shall be stored at a temperature of 140\u00b0F or higher, all cold food shall be stored at a ...", "No person affected with or carrying any disease in a communicable form or afflicted with boils, infe ...", "In food establishments, there shall be adequate sewage and waste water disposal facilities that comp ...", "Adequate and convenient toilet facilities shall be provided.\u00a0 They should be properly designed, main ...", "All food should be properly protected from contamination during storage, preparation, display, servi ...", "All necessary control measures shall be used to effectively minimize or eliminate the presence of ro ...", "The area outside of the establishment used for the storage of garbage shall be clean at all times an ...", "A certified food service manager must be present in all establishments at which potentially hazardou ...", "All dishwashing machines must be of a type that complies with all requirements of the plumbing secti ...", "A separate and distinct offense shall be deemed to have been committed for each Minor violation that ...", "All food not stored in the original container shall be stored in properly labeled containers, the li ...", "Containers and utensils shall be inverted, covered, or otherwise protected from contamination until  ...", "All food and non-food contact equipment and utensils shall be smooth, easily cleanable, and durable, ...", "All utensils shall be thoroughly cleaned and sanitized after each usage, all food and non-food conta ...", "The floors shall be constructed per code, be smooth and easily cleaned, and be kept clean and in goo ...", "The walls and ceilings shall be in good repair and easily cleaned, use dustless cleaning methods. ...", "All rooms in which food or drink is prepared, or in which utensils are washed, shall be lighted so t ...", "Toilet rooms shall be completely enclosed and shall be vented to the outside air or mechanically ven ...", "The flow of air discharged from kitchen fans shall always be through a duct to a point above the roo ...", "All food establishments that display, prepare, or store potentially hazardous foods shall have calib ...", "All parts of the food establishment and all parts of the property used in connection with the operat ...", null], "marker": {"color": "lightgreen", "line": {"width": 1.5}}, "name": "Hispanic or Latino", "opacity": 0.8, "type": "bar", "x": [2, 3, 5, 10, 11, 16, 18, 19, 21, 24, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 40, 41, 55], "y": [0.024206279600070164, 0.03224580482956207, 0.016692977840145003, 0.017306905221306203, 0.015435888440624452, 0.02023036894112144, 0.08975033619832778, 0.02207215108460504, 0.02081506168508449, 0.01736537449570251, 0.026428112027129743, 0.02327077120972929, 0.015406653803426299, 0.07981055955095598, 0.0894872244635444, 0.1010349061568146, 0.09890077764134947, 0.0511898497339648, 0.02020113430392329, 0.09887154300415132, 0.02996550312810618, 0.061071157106940305, 0.028211424896217037]}],
            {"height": 500, "legend": {"orientation": "h"}, "template": {"data": {"bar": [{"error_x": {"color": "#2a3f5f"}, "error_y": {"color": "#2a3f5f"}, "marker": {"line": {"color": "#E5ECF6", "width": 0.5}}, "type": "bar"}], "barpolar": [{"marker": {"line": {"color": "#E5ECF6", "width": 0.5}}, "type": "barpolar"}], "carpet": [{"aaxis": {"endlinecolor": "#2a3f5f", "gridcolor": "white", "linecolor": "white", "minorgridcolor": "white", "startlinecolor": "#2a3f5f"}, "baxis": {"endlinecolor": "#2a3f5f", "gridcolor": "white", "linecolor": "white", "minorgridcolor": "white", "startlinecolor": "#2a3f5f"}, "type": "carpet"}], "choropleth": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "type": "choropleth"}], "contour": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "contour"}], "contourcarpet": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "type": "contourcarpet"}], "heatmap": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "heatmap"}], "heatmapgl": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "heatmapgl"}], "histogram": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "histogram"}], "histogram2d": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "histogram2d"}], "histogram2dcontour": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "histogram2dcontour"}], "mesh3d": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "type": "mesh3d"}], "parcoords": [{"line": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "parcoords"}], "pie": [{"automargin": true, "type": "pie"}], "scatter": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatter"}], "scatter3d": [{"line": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatter3d"}], "scattercarpet": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scattercarpet"}], "scattergeo": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scattergeo"}], "scattergl": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scattergl"}], "scattermapbox": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scattermapbox"}], "scatterpolar": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatterpolar"}], "scatterpolargl": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatterpolargl"}], "scatterternary": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatterternary"}], "surface": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "surface"}], "table": [{"cells": {"fill": {"color": "#EBF0F8"}, "line": {"color": "white"}}, "header": {"fill": {"color": "#C8D4E3"}, "line": {"color": "white"}}, "type": "table"}]}, "layout": {"annotationdefaults": {"arrowcolor": "#2a3f5f", "arrowhead": 0, "arrowwidth": 1}, "coloraxis": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "colorscale": {"diverging": [[0, "#8e0152"], [0.1, "#c51b7d"], [0.2, "#de77ae"], [0.3, "#f1b6da"], [0.4, "#fde0ef"], [0.5, "#f7f7f7"], [0.6, "#e6f5d0"], [0.7, "#b8e186"], [0.8, "#7fbc41"], [0.9, "#4d9221"], [1, "#276419"]], "sequential": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "sequentialminus": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]]}, "colorway": ["#636efa", "#EF553B", "#00cc96", "#ab63fa", "#FFA15A", "#19d3f3", "#FF6692", "#B6E880", "#FF97FF", "#FECB52"], "font": {"color": "#2a3f5f"}, "geo": {"bgcolor": "white", "lakecolor": "white", "landcolor": "#E5ECF6", "showlakes": true, "showland": true, "subunitcolor": "white"}, "hoverlabel": {"align": "left"}, "hovermode": "closest", "mapbox": {"style": "light"}, "paper_bgcolor": "white", "plot_bgcolor": "#E5ECF6", "polar": {"angularaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "bgcolor": "#E5ECF6", "radialaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}}, "scene": {"xaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "gridwidth": 2, "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white"}, "yaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "gridwidth": 2, "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white"}, "zaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "gridwidth": 2, "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white"}}, "shapedefaults": {"line": {"color": "#2a3f5f"}}, "ternary": {"aaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "baxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "bgcolor": "#E5ECF6", "caxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}}, "title": {"x": 0.05}, "xaxis": {"automargin": true, "gridcolor": "white", "linecolor": "white", "ticks": "", "title": {"standoff": 15}, "zerolinecolor": "white", "zerolinewidth": 2}, "yaxis": {"automargin": true, "gridcolor": "white", "linecolor": "white", "ticks": "", "title": {"standoff": 15}, "zerolinecolor": "white", "zerolinewidth": 2}}}, "title": {"text": "Distribution of Violations for Each of the Ethnicities", "x": 0.5, "xanchor": "center", "y": 0.9, "yanchor": "top"}},
            {"responsive": true}
        )
    };
    if (document.getElementById("1e38adb2-a7f7-4858-b207-fe98c1292e28")) {
        Plotly.newPlot(
            '1e38adb2-a7f7-4858-b207-fe98c1292e28',
            [{"hovertext": ["all food establishments that prepare, sell, or store hot food shall have adequate hot food storage f ...", "All hot food shall be stored at a temperature of 140\u00b0F or higher, all cold food shall be stored at a ...", "No person affected with or carrying any disease in a communicable form or afflicted with boils, infe ...", "In food establishments, there shall be adequate sewage and waste water disposal facilities that comp ...", "Adequate and convenient toilet facilities shall be provided.\u00a0 They should be properly designed, main ...", "All food should be properly protected from contamination during storage, preparation, display, servi ...", "All necessary control measures shall be used to effectively minimize or eliminate the presence of ro ...", "The area outside of the establishment used for the storage of garbage shall be clean at all times an ...", "A certified food service manager must be present in all establishments at which potentially hazardou ...", "All dishwashing machines must be of a type that complies with all requirements of the plumbing secti ...", "A separate and distinct offense shall be deemed to have been committed for each Minor violation that ...", "All food not stored in the original container shall be stored in properly labeled containers, the li ...", "Containers and utensils shall be inverted, covered, or otherwise protected from contamination until  ...", "All food and non-food contact equipment and utensils shall be smooth, easily cleanable, and durable, ...", "All utensils shall be thoroughly cleaned and sanitized after each usage, all food and non-food conta ...", "The floors shall be constructed per code, be smooth and easily cleaned, and be kept clean and in goo ...", "The walls and ceilings shall be in good repair and easily cleaned, use dustless cleaning methods. ...", "All rooms in which food or drink is prepared, or in which utensils are washed, shall be lighted so t ...", "Toilet rooms shall be completely enclosed and shall be vented to the outside air or mechanically ven ...", "The flow of air discharged from kitchen fans shall always be through a duct to a point above the roo ...", "All food establishments that display, prepare, or store potentially hazardous foods shall have calib ...", "All parts of the food establishment and all parts of the property used in connection with the operat ...", null], "marker": {"color": "dodgerblue", "line": {"width": 1.5}}, "name": "Black or African American Alone", "opacity": 0.8, "type": "bar", "x": [2, 3, 5, 10, 11, 16, 18, 19, 21, 24, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 40, 41, 55], "y": [0.023245223655068203, 0.027778352756101094, 0.01333029744778622, 0.01564861004740121, 0.01581420380451657, 0.010370309039349216, 0.09848688704435843, 0.023576411169298917, 0.02912380203266337, 0.01422036389228126, 0.020802715737616693, 0.015006934238579206, 0.009914926207281986, 0.07039804599366604, 0.0949680197056571, 0.11183788371178406, 0.11020264536026991, 0.050174908405953095, 0.020637121980501334, 0.10072240276541575, 0.02446647761379396, 0.0763801204694583, 0.022872637701558653]}],
            {"height": 500, "template": {"data": {"bar": [{"error_x": {"color": "#2a3f5f"}, "error_y": {"color": "#2a3f5f"}, "marker": {"line": {"color": "#E5ECF6", "width": 0.5}}, "type": "bar"}], "barpolar": [{"marker": {"line": {"color": "#E5ECF6", "width": 0.5}}, "type": "barpolar"}], "carpet": [{"aaxis": {"endlinecolor": "#2a3f5f", "gridcolor": "white", "linecolor": "white", "minorgridcolor": "white", "startlinecolor": "#2a3f5f"}, "baxis": {"endlinecolor": "#2a3f5f", "gridcolor": "white", "linecolor": "white", "minorgridcolor": "white", "startlinecolor": "#2a3f5f"}, "type": "carpet"}], "choropleth": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "type": "choropleth"}], "contour": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "contour"}], "contourcarpet": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "type": "contourcarpet"}], "heatmap": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "heatmap"}], "heatmapgl": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "heatmapgl"}], "histogram": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "histogram"}], "histogram2d": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "histogram2d"}], "histogram2dcontour": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "histogram2dcontour"}], "mesh3d": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "type": "mesh3d"}], "parcoords": [{"line": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "parcoords"}], "pie": [{"automargin": true, "type": "pie"}], "scatter": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatter"}], "scatter3d": [{"line": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatter3d"}], "scattercarpet": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scattercarpet"}], "scattergeo": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scattergeo"}], "scattergl": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scattergl"}], "scattermapbox": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scattermapbox"}], "scatterpolar": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatterpolar"}], "scatterpolargl": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatterpolargl"}], "scatterternary": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatterternary"}], "surface": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "surface"}], "table": [{"cells": {"fill": {"color": "#EBF0F8"}, "line": {"color": "white"}}, "header": {"fill": {"color": "#C8D4E3"}, "line": {"color": "white"}}, "type": "table"}]}, "layout": {"annotationdefaults": {"arrowcolor": "#2a3f5f", "arrowhead": 0, "arrowwidth": 1}, "coloraxis": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "colorscale": {"diverging": [[0, "#8e0152"], [0.1, "#c51b7d"], [0.2, "#de77ae"], [0.3, "#f1b6da"], [0.4, "#fde0ef"], [0.5, "#f7f7f7"], [0.6, "#e6f5d0"], [0.7, "#b8e186"], [0.8, "#7fbc41"], [0.9, "#4d9221"], [1, "#276419"]], "sequential": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "sequentialminus": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]]}, "colorway": ["#636efa", "#EF553B", "#00cc96", "#ab63fa", "#FFA15A", "#19d3f3", "#FF6692", "#B6E880", "#FF97FF", "#FECB52"], "font": {"color": "#2a3f5f"}, "geo": {"bgcolor": "white", "lakecolor": "white", "landcolor": "#E5ECF6", "showlakes": true, "showland": true, "subunitcolor": "white"}, "hoverlabel": {"align": "left"}, "hovermode": "closest", "mapbox": {"style": "light"}, "paper_bgcolor": "white", "plot_bgcolor": "#E5ECF6", "polar": {"angularaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "bgcolor": "#E5ECF6", "radialaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}}, "scene": {"xaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "gridwidth": 2, "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white"}, "yaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "gridwidth": 2, "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white"}, "zaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "gridwidth": 2, "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white"}}, "shapedefaults": {"line": {"color": "#2a3f5f"}}, "ternary": {"aaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "baxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "bgcolor": "#E5ECF6", "caxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}}, "title": {"x": 0.05}, "xaxis": {"automargin": true, "gridcolor": "white", "linecolor": "white", "ticks": "", "title": {"standoff": 15}, "zerolinecolor": "white", "zerolinewidth": 2}, "yaxis": {"automargin": true, "gridcolor": "white", "linecolor": "white", "ticks": "", "title": {"standoff": 15}, "zerolinecolor": "white", "zerolinewidth": 2}}}, "title": {"text": "Distribution of Violations for the Black and African American Population", "x": 0.5, "xanchor": "center", "y": 0.9, "yanchor": "top"}},
            {"responsive": true}
        )
    };
    if (document.getElementById("e2253a01-4bfc-40ef-b0da-db6e7e41fad0")) {
        Plotly.newPlot(
            'e2253a01-4bfc-40ef-b0da-db6e7e41fad0',
            [{"hovertext": ["all food establishments that prepare, sell, or store hot food shall have adequate hot food storage f ...", "All hot food shall be stored at a temperature of 140\u00b0F or higher, all cold food shall be stored at a ...", "No person affected with or carrying any disease in a communicable form or afflicted with boils, infe ...", "In food establishments, there shall be adequate sewage and waste water disposal facilities that comp ...", "Adequate and convenient toilet facilities shall be provided.\u00a0 They should be properly designed, main ...", "All food should be properly protected from contamination during storage, preparation, display, servi ...", "All necessary control measures shall be used to effectively minimize or eliminate the presence of ro ...", "The area outside of the establishment used for the storage of garbage shall be clean at all times an ...", "A certified food service manager must be present in all establishments at which potentially hazardou ...", "All dishwashing machines must be of a type that complies with all requirements of the plumbing secti ...", "A separate and distinct offense shall be deemed to have been committed for each Minor violation that ...", "All food not stored in the original container shall be stored in properly labeled containers, the li ...", "Containers and utensils shall be inverted, covered, or otherwise protected from contamination until  ...", "All food and non-food contact equipment and utensils shall be smooth, easily cleanable, and durable, ...", "All utensils shall be thoroughly cleaned and sanitized after each usage, all food and non-food conta ...", "The floors shall be constructed per code, be smooth and easily cleaned, and be kept clean and in goo ...", "The walls and ceilings shall be in good repair and easily cleaned, use dustless cleaning methods. ...", "All rooms in which food or drink is prepared, or in which utensils are washed, shall be lighted so t ...", "Toilet rooms shall be completely enclosed and shall be vented to the outside air or mechanically ven ...", "The flow of air discharged from kitchen fans shall always be through a duct to a point above the roo ...", "All food establishments that display, prepare, or store potentially hazardous foods shall have calib ...", "All parts of the food establishment and all parts of the property used in connection with the operat ...", null], "marker": {"color": "lightgreen", "line": {"width": 1.5}}, "name": "Hispanic or Latino", "opacity": 0.8, "type": "bar", "x": [2, 3, 5, 10, 11, 16, 18, 19, 21, 24, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 40, 41, 55], "y": [0.024206279600070164, 0.03224580482956207, 0.016692977840145003, 0.017306905221306203, 0.015435888440624452, 0.02023036894112144, 0.08975033619832778, 0.02207215108460504, 0.02081506168508449, 0.01736537449570251, 0.026428112027129743, 0.02327077120972929, 0.015406653803426299, 0.07981055955095598, 0.0894872244635444, 0.1010349061568146, 0.09890077764134947, 0.0511898497339648, 0.02020113430392329, 0.09887154300415132, 0.02996550312810618, 0.061071157106940305, 0.028211424896217037]}],
            {"height": 500, "template": {"data": {"bar": [{"error_x": {"color": "#2a3f5f"}, "error_y": {"color": "#2a3f5f"}, "marker": {"line": {"color": "#E5ECF6", "width": 0.5}}, "type": "bar"}], "barpolar": [{"marker": {"line": {"color": "#E5ECF6", "width": 0.5}}, "type": "barpolar"}], "carpet": [{"aaxis": {"endlinecolor": "#2a3f5f", "gridcolor": "white", "linecolor": "white", "minorgridcolor": "white", "startlinecolor": "#2a3f5f"}, "baxis": {"endlinecolor": "#2a3f5f", "gridcolor": "white", "linecolor": "white", "minorgridcolor": "white", "startlinecolor": "#2a3f5f"}, "type": "carpet"}], "choropleth": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "type": "choropleth"}], "contour": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "contour"}], "contourcarpet": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "type": "contourcarpet"}], "heatmap": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "heatmap"}], "heatmapgl": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "heatmapgl"}], "histogram": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "histogram"}], "histogram2d": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "histogram2d"}], "histogram2dcontour": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "histogram2dcontour"}], "mesh3d": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "type": "mesh3d"}], "parcoords": [{"line": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "parcoords"}], "pie": [{"automargin": true, "type": "pie"}], "scatter": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatter"}], "scatter3d": [{"line": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatter3d"}], "scattercarpet": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scattercarpet"}], "scattergeo": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scattergeo"}], "scattergl": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scattergl"}], "scattermapbox": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scattermapbox"}], "scatterpolar": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatterpolar"}], "scatterpolargl": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatterpolargl"}], "scatterternary": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatterternary"}], "surface": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "surface"}], "table": [{"cells": {"fill": {"color": "#EBF0F8"}, "line": {"color": "white"}}, "header": {"fill": {"color": "#C8D4E3"}, "line": {"color": "white"}}, "type": "table"}]}, "layout": {"annotationdefaults": {"arrowcolor": "#2a3f5f", "arrowhead": 0, "arrowwidth": 1}, "coloraxis": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "colorscale": {"diverging": [[0, "#8e0152"], [0.1, "#c51b7d"], [0.2, "#de77ae"], [0.3, "#f1b6da"], [0.4, "#fde0ef"], [0.5, "#f7f7f7"], [0.6, "#e6f5d0"], [0.7, "#b8e186"], [0.8, "#7fbc41"], [0.9, "#4d9221"], [1, "#276419"]], "sequential": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "sequentialminus": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]]}, "colorway": ["#636efa", "#EF553B", "#00cc96", "#ab63fa", "#FFA15A", "#19d3f3", "#FF6692", "#B6E880", "#FF97FF", "#FECB52"], "font": {"color": "#2a3f5f"}, "geo": {"bgcolor": "white", "lakecolor": "white", "landcolor": "#E5ECF6", "showlakes": true, "showland": true, "subunitcolor": "white"}, "hoverlabel": {"align": "left"}, "hovermode": "closest", "mapbox": {"style": "light"}, "paper_bgcolor": "white", "plot_bgcolor": "#E5ECF6", "polar": {"angularaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "bgcolor": "#E5ECF6", "radialaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}}, "scene": {"xaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "gridwidth": 2, "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white"}, "yaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "gridwidth": 2, "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white"}, "zaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "gridwidth": 2, "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white"}}, "shapedefaults": {"line": {"color": "#2a3f5f"}}, "ternary": {"aaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "baxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "bgcolor": "#E5ECF6", "caxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}}, "title": {"x": 0.05}, "xaxis": {"automargin": true, "gridcolor": "white", "linecolor": "white", "ticks": "", "title": {"standoff": 15}, "zerolinecolor": "white", "zerolinewidth": 2}, "yaxis": {"automargin": true, "gridcolor": "white", "linecolor": "white", "ticks": "", "title": {"standoff": 15}, "zerolinecolor": "white", "zerolinewidth": 2}}}, "title": {"text": "Distribution of Violations for the Hispanic or Latino Population", "x": 0.5, "xanchor": "center", "y": 0.9, "yanchor": "top"}},
            {"responsive": true}
        )
    };
    if (document.getElementById("55807f9e-8d15-45ec-9772-a19c0f25eddc")) {
        Plotly.newPlot(
            '55807f9e-8d15-45ec-9772-a19c0f25eddc',
            [{"hovertext": ["all food establishments that prepare, sell, or store hot food shall have adequate hot food storage f ...", "All hot food shall be stored at a temperature of 140\u00b0F or higher, all cold food shall be stored at a ...", "No person affected with or carrying any disease in a communicable form or afflicted with boils, infe ...", "In food establishments, there shall be adequate sewage and waste water disposal facilities that comp ...", "Adequate and convenient toilet facilities shall be provided.\u00a0 They should be properly designed, main ...", "All food should be properly protected from contamination during storage, preparation, display, servi ...", "All necessary control measures shall be used to effectively minimize or eliminate the presence of ro ...", "The area outside of the establishment used for the storage of garbage shall be clean at all times an ...", "A certified food service manager must be present in all establishments at which potentially hazardou ...", "All dishwashing machines must be of a type that complies with all requirements of the plumbing secti ...", "A separate and distinct offense shall be deemed to have been committed for each Minor violation that ...", "All food not stored in the original container shall be stored in properly labeled containers, the li ...", "Containers and utensils shall be inverted, covered, or otherwise protected from contamination until  ...", "All food and non-food contact equipment and utensils shall be smooth, easily cleanable, and durable, ...", "All utensils shall be thoroughly cleaned and sanitized after each usage, all food and non-food conta ...", "The floors shall be constructed per code, be smooth and easily cleaned, and be kept clean and in goo ...", "The walls and ceilings shall be in good repair and easily cleaned, use dustless cleaning methods. ...", "All rooms in which food or drink is prepared, or in which utensils are washed, shall be lighted so t ...", "Toilet rooms shall be completely enclosed and shall be vented to the outside air or mechanically ven ...", "The flow of air discharged from kitchen fans shall always be through a duct to a point above the roo ...", "All food establishments that display, prepare, or store potentially hazardous foods shall have calib ...", "All parts of the food establishment and all parts of the property used in connection with the operat ...", null], "marker": {"color": "lightskyblue", "line": {"width": 1.5}}, "name": "White Alone", "opacity": 0.8, "type": "bar", "x": [2, 3, 5, 10, 11, 16, 18, 19, 21, 24, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 40, 41, 55], "y": [0.021645277662783135, 0.03728783488083269, 0.01518914976245392, 0.015908687681116564, 0.015504563644607408, 0.03178780531078124, 0.08460977388767323, 0.019664084215506535, 0.020225915193092435, 0.01688449937902892, 0.03650915685926627, 0.026504622784710313, 0.016914069430480808, 0.08786247954738108, 0.09092790821456029, 0.10348532339779605, 0.09428903739625841, 0.0443156504425651, 0.017259053364086188, 0.0962800875273523, 0.026277919056912492, 0.052762828473988214, 0.02786484515149723]}],
            {"height": 500, "template": {"data": {"bar": [{"error_x": {"color": "#2a3f5f"}, "error_y": {"color": "#2a3f5f"}, "marker": {"line": {"color": "#E5ECF6", "width": 0.5}}, "type": "bar"}], "barpolar": [{"marker": {"line": {"color": "#E5ECF6", "width": 0.5}}, "type": "barpolar"}], "carpet": [{"aaxis": {"endlinecolor": "#2a3f5f", "gridcolor": "white", "linecolor": "white", "minorgridcolor": "white", "startlinecolor": "#2a3f5f"}, "baxis": {"endlinecolor": "#2a3f5f", "gridcolor": "white", "linecolor": "white", "minorgridcolor": "white", "startlinecolor": "#2a3f5f"}, "type": "carpet"}], "choropleth": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "type": "choropleth"}], "contour": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "contour"}], "contourcarpet": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "type": "contourcarpet"}], "heatmap": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "heatmap"}], "heatmapgl": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "heatmapgl"}], "histogram": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "histogram"}], "histogram2d": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "histogram2d"}], "histogram2dcontour": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "histogram2dcontour"}], "mesh3d": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "type": "mesh3d"}], "parcoords": [{"line": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "parcoords"}], "pie": [{"automargin": true, "type": "pie"}], "scatter": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatter"}], "scatter3d": [{"line": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatter3d"}], "scattercarpet": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scattercarpet"}], "scattergeo": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scattergeo"}], "scattergl": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scattergl"}], "scattermapbox": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scattermapbox"}], "scatterpolar": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatterpolar"}], "scatterpolargl": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatterpolargl"}], "scatterternary": [{"marker": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "type": "scatterternary"}], "surface": [{"colorbar": {"outlinewidth": 0, "ticks": ""}, "colorscale": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "type": "surface"}], "table": [{"cells": {"fill": {"color": "#EBF0F8"}, "line": {"color": "white"}}, "header": {"fill": {"color": "#C8D4E3"}, "line": {"color": "white"}}, "type": "table"}]}, "layout": {"annotationdefaults": {"arrowcolor": "#2a3f5f", "arrowhead": 0, "arrowwidth": 1}, "coloraxis": {"colorbar": {"outlinewidth": 0, "ticks": ""}}, "colorscale": {"diverging": [[0, "#8e0152"], [0.1, "#c51b7d"], [0.2, "#de77ae"], [0.3, "#f1b6da"], [0.4, "#fde0ef"], [0.5, "#f7f7f7"], [0.6, "#e6f5d0"], [0.7, "#b8e186"], [0.8, "#7fbc41"], [0.9, "#4d9221"], [1, "#276419"]], "sequential": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]], "sequentialminus": [[0.0, "#0d0887"], [0.1111111111111111, "#46039f"], [0.2222222222222222, "#7201a8"], [0.3333333333333333, "#9c179e"], [0.4444444444444444, "#bd3786"], [0.5555555555555556, "#d8576b"], [0.6666666666666666, "#ed7953"], [0.7777777777777778, "#fb9f3a"], [0.8888888888888888, "#fdca26"], [1.0, "#f0f921"]]}, "colorway": ["#636efa", "#EF553B", "#00cc96", "#ab63fa", "#FFA15A", "#19d3f3", "#FF6692", "#B6E880", "#FF97FF", "#FECB52"], "font": {"color": "#2a3f5f"}, "geo": {"bgcolor": "white", "lakecolor": "white", "landcolor": "#E5ECF6", "showlakes": true, "showland": true, "subunitcolor": "white"}, "hoverlabel": {"align": "left"}, "hovermode": "closest", "mapbox": {"style": "light"}, "paper_bgcolor": "white", "plot_bgcolor": "#E5ECF6", "polar": {"angularaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "bgcolor": "#E5ECF6", "radialaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}}, "scene": {"xaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "gridwidth": 2, "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white"}, "yaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "gridwidth": 2, "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white"}, "zaxis": {"backgroundcolor": "#E5ECF6", "gridcolor": "white", "gridwidth": 2, "linecolor": "white", "showbackground": true, "ticks": "", "zerolinecolor": "white"}}, "shapedefaults": {"line": {"color": "#2a3f5f"}}, "ternary": {"aaxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "baxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}, "bgcolor": "#E5ECF6", "caxis": {"gridcolor": "white", "linecolor": "white", "ticks": ""}}, "title": {"x": 0.05}, "xaxis": {"automargin": true, "gridcolor": "white", "linecolor": "white", "ticks": "", "title": {"standoff": 15}, "zerolinecolor": "white", "zerolinewidth": 2}, "yaxis": {"automargin": true, "gridcolor": "white", "linecolor": "white", "ticks": "", "title": {"standoff": 15}, "zerolinecolor": "white", "zerolinewidth": 2}}}, "title": {"text": "Distribution of Violations for the White Population", "x": 0.5, "xanchor": "center", "y": 0.9, "yanchor": "top"}},
            {"responsive": true}
        )
    };
</script>

</div>
      <hr>
    
      <h2>
        <a style="color: inherit; font-weight: lighter;" data-toggle="collapse" href="#Size" 
           aria-expanded="true" aria-controls="Size" id="head_Size">
           What is the impact of <span class="emphasis">the business size</span>?
           <i class="fa fa-caret-down" aria-hidden="false" style="margin-left: 10%;"></i>
        </a>
      </h2>
      <div id="Size" class="collapse show"><!-- <h2> What is the impact of <span class="">the business size</span>?</h2> -->

<p>When deciding which restaurant to go, a good point to make the decision can be whether we know it or not, especilly we we are abroad. And brands play a big role here. How different is eating in such kind of restaurants from eating in independent restaurants? Let’s discover it.</p>

<p>First of  all, we need to know which are the top chain businesses in our dataset of inspections in Chicago by number of establishments. The following table shows the number of different establishments of the top chains in our dataset of Chicago. If the inspection are sampling businesses uniformly from all over Chicago, this can give us a good picture of Chicago’s chain business scence.</p>

<iframe src="/ADAknow/images/tableTopChains.html" style="width: 100%; height: 500px; frameborder='0'"></iframe>

<p>From the table we can derive that Subway is the company with biggest number establishments in Chicago, followed by 7eleven and Starbucks. Which of these chains is your favorite?</p>

<h3> McDonald's vs Burger King </h3>

<p>Let’s take on the battlefield of hamburgers. The 2 best-known chains in this industry are: McDonald’s and Burger. Everyone has their preference when coming to them. But what happens when we analyze them from the point of view of their cleanliness conditions? A lot of times it is claimed that these businesses are not the best with regard to keeping their establishments correctly sanitized. Will there be a different between the two?</p>

<iframe src="/ADAknow/images/MC_vs_BG.html" style="width: 100%; height: 500px; frameborder='0'"></iframe>

<p>The plot above shows the rate of Pass/Pass with Conditions/Fail inspections for all the restaurants in Chicago that belong to these 2 chains. In the plot we observe the level of cleanliness for McDonald’s and Burger is very similar. There is no siginificant difference between them. They both have the same percentage of failed inspections, while McDonald’s has a 7% more of passed inspections, exactly the increased percentage of “Pass with Conditions” inspections that Burger King has over McDonald’s. In general terms we can say they are vey similar.</p>

<p>Thus, we can say that in Chicago there is not a big difference between going to McDonald’s and Burger King when considering their level of cleanliness.</p>

<h3> Top Chains Inspections rates</h3>

<p>We can do a similar analysis of the cleaning conditions of our previously computed top-10 chains in Chicago which are also familiar to many of us around the world. Here, we will check the percentage of “Passed” and “Failed” inspections for the top 10 chains in Chicago.</p>

<iframe src="/ADAknow/images/allTopChains.html" style="width: 100%; height: 500px; frameborder='0'"></iframe>

<p>In the plot above, we show the percentage of failed and passed inspections for the top chains in Chicago. The plot is sorted by number of Failed inspections. We observe that “Citgo” and “Family Dollar”, gas station shops and a variety store chain respectively have the largest amount of of failed inspections. In fact, the number “Fail” + “Pass w/ Conditiions” is alarmingly close to 50% of their inspected stores.</p>

<h3> Independet businesses vs Chains</h3>

<p>When we are in a new city, we need to make the decision whether to go into the unexplored wildenesses of eating in a new restaurant that we do not know or visiting a chain restaurant that is familiar to us. One could wonder if there is a big difference of inspections passing rate between the independent businesses and big chains.</p>

<p>Let’s look at the difference passing inspection rates between independent businesses and chain businesses in Chicago. For this analysis, we need to establish what chain business is. The definition is unclear. Can we consider a businesses a chain when they have 2 estabishments? 3?. We decided to establish these threshold at 5 in order to consider a business a brand. Then we compare the Pass/Fail inspection rates between the group of independent businesses and chains.</p>

<iframe src="/ADAknow/images/independent_vs_chain.html" style="width: 100%; height: 500px; frameborder='0'"></iframe>

<p>There is a slight difference in the number of “Failed” inspections, where independent businesses failed 4% more than inspections than chain businesses. However, the there does not seem to be a big difference between the two types. Therefore, we can not conclude that it is safer to go to indepndent businesses than it is to go to chain businesses.</p>

<p>Hurrah! We do not have to care about the cleaning conditions of independent businesses when we go to Chicago. Independent businesses and big chains have very similar conditions.</p>
</div>
      <hr>
    
      <h2>
        <a style="color: inherit; font-weight: lighter;" data-toggle="collapse" href="#Time" 
           aria-expanded="true" aria-controls="Time" id="head_Time">
           What is the impact of <span class="emphasis">the time of the year</span>?
           <i class="fa fa-caret-down" aria-hidden="false" style="margin-left: 10%;"></i>
        </a>
      </h2>
      <div id="Time" class="collapse show"><p>People’s lifestyles, needs and wants change along the year, so we will investigate whether catering business performances are also subject to change as the seasons go by.
<!-- you should be watching out for as a person who wants to buy some food or a facility owner that needs to know what to expect. --></p>

<div class="column">
    <div class="wrapperDoughnut" id="cherry"></div>
</div>
<div class="column">
    <div class="wrapperDoughnut" id="car"></div>
</div>

<p>As we can see, the temperature and the time of the year do not signficantly affect the percentage of failed inspections.</p>

<p>However, a further look into the data shows us that multiple violations, especially those with codes 2 and 3 have a distribution that is highly skewed - with signficantly more occurences for high temperature, this presents a potential risk as both those violations are critical violations. Both codes are related to proper food storage, and looking at some examples of the violations, we can find notes that referigator being broken down is repeatedly reported. This is a normal problem where high temperatures causes sometimes the breaking down of referigerators if proper regular maintenance is not done. An example of that is the following plot.</p>

<div class="column">
<div class="wrapperDoughnut" id="timeline-chart"></div>
</div>

<!-- JS -->
<script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>

<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

<script>
    function generate_plot() {
      var options = {
            chart: {
                height: 350,
                type: 'bar',
            },
            plotOptions: {
                bar: {
                    dataLabels: {
                        position: 'top', // top, center, bottom
                    },
                }
            },
            dataLabels: {
                enabled: true,
                formatter: function (val) {
                    return val + "%";
                },
                offsetY: 3,
                style: {
                    fontSize: '12px',
                    colors: ["#ffffff"]
                }
            },
            series: [{
                name: 'Violation percentage',
                data: [19.0, 20.0, 20.0, 20.0, 19.0, 20.0, 20.0, 20.0, 20.0, 19.0, 18.0, 16.0]
            }],
            xaxis: {
                categories: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
                position: 'top',
                labels: {
                    offsetY: -18,
                },
                axisBorder: {
                    show: false
                },
                axisTicks: {
                    show: false
                },
                tooltip: {
                    enabled: true,
                    offsetY: -35,
                }
            },
            fill: {
                gradient: {
                    shade: 'light',
                    type: "horizontal",
                    shadeIntensity: 0.25,
                    gradientToColors: undefined,
                    inverseColors: true,
                    opacityFrom: 1,
                    opacityTo: 1,
                    stops: [50, 0, 100, 100]
                },
            },
            yaxis: {
                axisBorder: {
                    show: false
                },
                axisTicks: {
                    show: false,
                },
                labels: {
                    show: false,
                    formatter: function (val) {
                        return val + "%";
                    }
                }
            },
            title: {
                text: 'Percentage of failed inspections in every month from 2010-2019',
                floating: true,
                offsetY: 320,
                align: 'center',
                style: {
                    color: '#444'
                }
            },
        };
        var chart = new ApexCharts(
            document.querySelector("#cherry"),
            options
        );
        chart.render();
    }
    function plot_temp() {
        var options = {
            chart: {
                height: 350,
                type: 'bar',
            },
            plotOptions: {
                bar: {
                    dataLabels: {
                        position: 'top', // top, center, bottom
                    },
                }
            },
            dataLabels: {
                enabled: true,
                formatter: function (val) {
                    return val + "°F";
                },
                offsetY: -20,
                style: {
                    fontSize: '12px',
                    colors: ["#304758"]
                }
            },
            series: [{
                name: 'Temperature',
                data: [30.72, 34.43, 46.84, 58.72, 70.94, 80.41, 85.0, 82.92, 75.93, 62.94, 47.61, 36.76]
            }],
            xaxis: {
                categories: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
                position: 'top',
                labels: {
                    offsetY: -18,
                },
                axisBorder: {
                    show: false
                },
                axisTicks: {
                    show: false
                },
                tooltip: {
                    enabled: true,
                    offsetY: -35,
                }
            },
            tooltip: {
                enabled: true,
                offsetY: -35,
                marker: {
                    show: false,
                },
            },
            fill: {
                gradient: {
                    shade: 'light',
                    type: "horizontal",
                    shadeIntensity: 0.25,
                    gradientToColors: undefined,
                    inverseColors: true,
                    opacityFrom: 1,
                    opacityTo: 1,
                    stops: [50, 0, 100, 100]
                },
                colors: ['#730000']
            },
            yaxis: {
                axisBorder: {
                    show: false
                },
                axisTicks: {
                    show: false,
                },
                labels: {
                    show: false,
                    formatter: function (val) {
                        return val + "°F";
                    },
                },
            },
            title: {
                text: 'Average maximum temperature by month from 2010-2019',
                floating: true,
                offsetY: 320,
                align: 'center',
                style: {
                    color: '#444'
                }
            },
        };
        var chart = new ApexCharts(
            document.querySelector("#car"),
            options
        );
        chart.render();
    }
    function plot_hist()
    {
        var options = {
            chart: {
                type: "histogram",
                height: 380,
                foreColor: "#999",
                events: {
                dataPointSelection: function(e, chart,opts) {
                    var arraySelected = []
                    opts.selectedDataPoints.map((selectedIndex) => {
                    selectedIndex.map((s) => {
                        arraySelected.push(chart.w.globals.series[0][s])
                    })
                    });
                    arraySelected = arraySelected.reduce((acc, curr) => acc + curr, 0)                                        
                    document.querySelector("#selected-count").innerHTML = arraySelected
                }
                }
            },
            plotOptions: {
                bar: {
                dataLabels: {
                    enabled: false
                }
                }
            },
            series: [{
                name: "#Occurences",
                data: [190, 419, 386, 395, 564, 832, 1207, 68]
            }],
            states: {
                active: {
                allowMultipleDataPointsSelection: true
                }
            },
            xaxis: {
                categories: ['20-30°F', '30-40°F', '40-50°F', '50-60°F', '60-70°F', '70-80°F', '80-90°F', '90-100°F'],
                axisBorder: {
                show: false
                },
                axisTicks: {
                show: false
                }
            },
            yaxis: {
                tickAmount: 4,
                labels: {
                offsetX: -5,
                offsetY: -5
                },
            },
            tooltip: {
                x: {
                format: "dd MMM yyyy"
                },
            },
            title: {
                text: 'Histogram of temperature distribution over violations of code 2',
                align: 'center',
                style: {
                    color: '#444'
                }
            },
        };
        var chart = new ApexCharts(document.querySelector("#timeline-chart"), options);
        chart.render();
    }
    generate_plot()
    plot_temp()
    plot_hist()
</script>

</div>
      <hr>
    
      <h2>
        <a style="color: inherit; font-weight: lighter;" data-toggle="collapse" href="#Reviews" 
           aria-expanded="true" aria-controls="Reviews" id="head_Reviews">
           What is the impact of <span class="emphasis">the business reviews</span>?
           <i class="fa fa-caret-down" aria-hidden="false" style="margin-left: 10%;"></i>
        </a>
      </h2>
      <div id="Reviews" class="collapse show"><p>Can the reviews posted on online services allow us to discover whether a businesses is failing or passing the inspections in Chicago. In this section, we are going to anlyze if there is a relationship between the review rates on Google Local (Google Maps) and their corresponding inspections.</p>

<p>We have merged the Heath Inspection with Google’s Local dataset, extracted from the  <a href="http://cseweb.ucsd.edu/~jmcauley/datasets.html">Recommender Systems Dataset</a> by Julian McAuley, professor at the University of California, San Diego. After filtering the data, obtaining only the reviews businesses in Chicago and merging them with our dataset, we obtain around 1600 unique businesses for which we have reviews.</p>

<p>We then try to find relationships between the businesses average review rate and their probability of passing an inspections (calculated from the Health Inspection Dataset), as well as the number of reviews.</p>

<p>To analyze the possible relationships, we several correlations. All of them yield to irrelevant correlations between the variables studied. The following table shows highest correlation (Spearman) obtained:</p>

<iframe src="/ADAknow/images/spearmanCorr.html" style="width: 100%; height: 350px; frameborder='0'"></iframe>

<p>In addition, we also inspect the variables visually. As expected, the variables do not seem to have a significant correlation. The following plot proves this point.</p>

<iframe src="/ADAknow/images/dataStory_GoogleReviews.html" style="width: 100%; height: 500px;"></iframe>

<p>Thus, we cannot find the connection between Google Local reviews and the posibility of passing or failing an inspection. Both visual inspection and numeric values have failed to find such connection.</p>

<p>Then, we can say the number rating of a businesses on Google does not seem to be correlated with the number of failed/passed inpspections. Does this mean that users do not really care about the health conditions of a businesses where they go? Probably they do not have the chance to go behind the scene and therefore they cannot know the true conditions of the businesses.</p>

<p>In this analysis, we do need to highlight that the number of overlapping businesses between the Google dataset and Health Inspection is small (~1600), whith a heavy-tailed distribution on the number of reviews. Therefore, we deduce that a dataset of reviews with more up-to-date reviews and more businneses in both datasets could yield different resutls.</p>

</div>
      <hr>
    
</div>

        </div>
      </div>

      <div class="wrapper-footer">
        <div class="container" style="text-align: center;">
          <p style="margin-bottom: 0;">An analysis made with <i class="fas fa-heart"></i> by Alfonso, Beatriz, Jade, and Mahmoud. </p>
          <p style="margin-bottom: 0;">EPFL's Applied Data Analysis class, 2019.</p>
            
          <footer class="footer">
            














          </footer>
        </div>
      </div>
    </div>

    

    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="/ADAknow/assets/custom.js"></script>
  </body>
</html>
